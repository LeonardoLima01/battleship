(()=>{"use strict";var e={d:(t,o)=>{for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{sk:()=>s,n1:()=>d,V:()=>f,mO:()=>u});let t=document.querySelector("#playerBoard"),o=document.querySelector("#computerBoard"),r=[t,o],n=document.querySelector(".container-c"),l=document.querySelector(".p-title");document.querySelector("#endContainer > button").addEventListener("click",(()=>{window.location.reload()}));const i=e=>({length:e,hits:0,isSunk:function(){return this.hits>=e},hit:function(){this.hits++}});function s(e,t,o,r){for(let n=0;n<o;n++)if("W"!=r.board[t][+e+ +n])return!1;return!0}const c=()=>{let e=function(){let e=[];for(let t=0;t<10;t++){e[t]=[];for(let o=0;o<10;o++)e[t][o]="W"}return e}();return{count:0,sizes:[5,4,3,3,2],ships:[],board:e,placeShip:function(t,o,r=0){if(s(t,o,this.sizes[this.count],this)){for(let n=0;n<this.sizes[this.count];n++)e[o][+t+ +n]="S"+this.count,1==r&&(document.querySelector(`.x${+t+ +n}y${o}`).style.backgroundColor="gray");let n=i(this.sizes[this.count]);this.ships.push(n),this.count++}else this.placeShip(a(10),a(10),r)},receiveAttack:function(e,t){let o=this.board==u.board?document.querySelector(`#playerBoard > .x${e}y${t}`):document.querySelector(`#computerBoard > .x${e}y${t}`);"W"==this.board[t][e]?(o.style.backgroundColor="#669ffa",this.board[t][e]="X"):"S"==this.board[t][e][0]&&(o.style.backgroundColor="red",this.ships[this.board[t][e][1]].hit(),this.board[t][e]="X")},allSunk:function(){for(let e=0;e<this.count;e++)if(!this.ships[e].isSunk())return!1;return!0}}};let a=e=>Math.floor(Math.random()*e),u=c(),d=c(),h=document.querySelector(".container-c"),y=document.querySelector(".p-title");function f(){(u.allSunk()||d.allSunk())&&(document.querySelector("#winner").textContent=u.allSunk()?"The Enemy":"The Player",document.querySelector("body>div").style.display="none",document.querySelector("#endContainer").style.display="flex"),function(){let e="",t="";do{e=a(10),t=a(10)}while("X"==u.board[t][e]);u.receiveAttack(e,t)}()}h.style.display="none",y.textContent="Place your ships",function(e){for(let t=0;t<5;t++)e.placeShip(a(10),a(10))}(d),function(){for(let e of r)for(let t=0;t<10;t++)for(let r=0;r<10;r++){let i=document.createElement("div");i.className="x"+r+"y"+t,i.style.border="1px solid black",i.style.backgroundColor="white",i.style.opacity="1",e==o?i.addEventListener("click",(()=>{let e=i.className[1],t=i.className[3];d.receiveAttack(e,t),f()})):(i.addEventListener("click",(()=>{if("green"==i.style.backgroundColor){let e=i.className[1],t=i.className[3];u.placeShip(e,t,1),5==u.count&&(n.style.display="flex",l.textContent="Your board")}})),i.addEventListener("mouseover",(()=>{if(s(i.className[1],i.className[3],u.sizes[u.count],u)){let e=i;for(let t=0;t<u.sizes[u.count];t++)e.style.backgroundColor="green",e=e.nextElementSibling}})),i.addEventListener("mouseout",(()=>{let e=i;for(let t=0;t<10;t++)e&&"green"==e.style.backgroundColor&&(e.style.backgroundColor="white",e=e.nextElementSibling)}))),e&&e.appendChild(i)}}()})();