(()=>{"use strict";var e={d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{sk:()=>c,n1:()=>d,V:()=>f,mO:()=>u});let t=document.querySelector("#playerBoard"),o=document.querySelector("#computerBoard"),n=[t,o],r=document.querySelector(".container-c"),l=document.querySelector(".p-title");document.querySelector("#endContainer > button").addEventListener("click",(()=>{window.location.reload()}));const s=e=>({length:e,hits:0,isSunk:function(){return this.hits>=e},hit:function(){this.hits++}});function c(e,t,o,n){for(let r=0;r<o;r++)if("W"!=n.board[t][+e+ +r])return!1;return!0}const i=()=>{let e=function(){let e=[];for(let t=0;t<10;t++){e[t]=[];for(let o=0;o<10;o++)e[t][o]="W"}return e}();return{count:0,sizes:[5,4,3,3,2],ships:[],board:e,placeShip:function(t,o,n=0){if(c(t,o,this.sizes[this.count],this)){for(let r=0;r<this.sizes[this.count];r++)e[o][+t+ +r]="S"+this.count,1==n&&(document.querySelector(`.x${+t+ +r}y${o}`).style.backgroundColor="gray");let r=s(this.sizes[this.count]);this.ships.push(r),this.count++}else this.placeShip(a(10),a(10),n)},receiveAttack:function(e,t){let o=this.board==u.board?document.querySelector(`#playerBoard > .x${e}y${t}`):document.querySelector(`#computerBoard > .x${e}y${t}`);"W"==this.board[t][e]?(o.style.backgroundColor="#669ffa",this.board[t][e]="X"):"S"==this.board[t][e][0]&&(o.style.backgroundColor="red",this.ships[this.board[t][e][1]].hit(),this.board[t][e]="X")},allSunk:function(){for(let e=0;e<this.count;e++)if(!this.ships[e].isSunk())return!1;return!0}}};let a=e=>Math.floor(Math.random()*e),u=i(),d=i(),h=document.querySelector(".container-c"),y=document.querySelector(".p-title");function f(){(u.allSunk()||d.allSunk())&&(document.querySelector("#winner").textContent=u.allSunk()?"The Enemy":"The Player",document.querySelector("body>div").style.display="none",document.querySelector("#endContainer").style.display="flex"),function(){let e="",t="";do{e=a(10),t=a(10),console.log(e),console.log(t),console.log(u)}while("X"==u.board[t][e]);u.receiveAttack(e,t)}()}h.style.display="none",y.textContent="Place your ships",console.log("Computer board: ",d),function(e){for(let t=0;t<5;t++)e.placeShip(a(10),a(10))}(d),function(){for(let e of n)for(let t=0;t<10;t++)for(let n=0;n<10;n++){let s=document.createElement("div");s.className="x"+n+"y"+t,s.style.border="2px solid black",s.style.backgroundColor="white",s.style.opacity="1",e==o?s.addEventListener("click",(()=>{let e=s.className[1],t=s.className[3];d.receiveAttack(e,t),f()})):(s.addEventListener("click",(()=>{if("green"==s.style.backgroundColor){let e=s.className[1],t=s.className[3];u.placeShip(e,t,1),5==u.count&&(r.style.display="flex",l.textContent="Your board"),console.log("X: ",e),console.log("Y: ",t),console.log(u)}})),s.addEventListener("mouseover",(()=>{if(c(s.className[1],s.className[3],u.sizes[u.count],u)){let e=s;for(let t=0;t<u.sizes[u.count];t++)e.style.backgroundColor="green",e=e.nextElementSibling}})),s.addEventListener("mouseout",(()=>{let e=s;for(let t=0;t<10;t++)e&&"green"==e.style.backgroundColor&&(e.style.backgroundColor="white",e=e.nextElementSibling)}))),e&&e.appendChild(s)}}()})();